// 加载店铺信息
function loadShopInfo() {
    $.ajax({
        url: API_BASE_URL + '/api/v1/admin/shop',
        type: 'GET',
        success: function(res) {
            if (res.code === 200) {
                const shop = res.data;
                $('#shopName').text(shop.name);
                $('#shopDescription').text(shop.description || '暂无描述');
                $('#shopPhone').text(shop.phone || '暂无电话');
                $('#shopHours').text(shop.business_hours || '暂无营业时间');
                $('#shopAddress').text(shop.address || '暂无地址');
                $('#shopCreatedAt').text(new Date(shop.created_at).toLocaleString());
                $('#shopStatus').text(shop.status === 1 ? '营业中' : '已关闭');
                $('#shopImage').attr('src', shop.cover_image || 'https://via.placeholder.com/300x200?text=暂无图片');
            } else {
                showError(res.message || '加载店铺信息失败');
            }
        },
        error: function() {
            showError('加载店铺信息失败');
        }
    });
}

// 更新店铺信息
function updateShop() {
    const formData = {
        name: $('#editShopName').val(),
        description: $('#editShopDescription').val(),
        phone: $('#editShopPhone').val(),
        business_hours: $('#editShopHours').val(),
        address: $('#editShopAddress').val(),
        cover_image: $('#editShopImage').val()
    };

    $.ajax({
        url: API_BASE_URL + '/api/v1/admin/shop',
        type: 'PUT',
        contentType: 'application/json',
        data: JSON.stringify(formData),
        success: function(res) {
            if (res.code === 200) {
                $('#editShopModal').modal('hide');
                showSuccess('更新成功');
                loadShopInfo();
            } else {
                showError(res.message || '更新失败');
            }
        },
        error: function() {
            showError('更新失败');
        }
    });
} 